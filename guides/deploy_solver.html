<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>How to deploy a new solver &mdash; Cornflow 0.4 documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/language_data.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Code documentation" href="../dev/index.html" />
    <link rel="prev" title="Guides and how-to" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Cornflow
          </a>
              <div class="version">
                0.4
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../main/index.html">Main topics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../deploy/index.html">Deployment</a></li>
<li class="toctree-l1"><a class="reference internal" href="../clients/index.html">Supported clients</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Guides and how-to</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Deploy a new solver</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-solver">The solver</a></li>
<li class="toctree-l3"><a class="reference internal" href="#name">Name</a></li>
<li class="toctree-l3"><a class="reference internal" href="#the-input-schema-and-output-schema">The input schema and output schema</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test-cases">Test cases</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../dev/index.html">Code documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../stable-rest-api-ref.html">API reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Cornflow</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Guides and how-to</a> &raquo;</li>
      <li>How to deploy a new solver</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/guides/deploy_solver.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="section" id="how-to-deploy-a-new-solver">
<h1>How to deploy a new solver<a class="headerlink" href="#how-to-deploy-a-new-solver" title="Permalink to this headline">¶</a></h1>
<p>There are several things that are needed when submitting a new solver.</p>
<ol class="arabic simple">
<li><p>A <cite>solve</cite> function.</p></li>
<li><p>A <cite>name</cite> string.</p></li>
<li><p>An <cite>instance</cite> dictionary.</p></li>
<li><p>An <cite>solution</cite> dictionary.</p></li>
<li><p>(optional) A <cite>test_cases</cite> function that returns a list of dictionaries.</p></li>
</ol>
<p>In its most minimalistic form: an app constitutes one dag file that contains all of this.
In the following lines we will explain each of these concepts.</p>
<div class="section" id="the-solver">
<h2>The solver<a class="headerlink" href="#the-solver" title="Permalink to this headline">¶</a></h2>
<p>The solver comes in the form of a python function that takes exactly two arguments: <cite>data</cite> and <cite>config</cite>. The first one is a dictionary with the input data (Instance) to solve the problem. The second one is also a dictionary with the execution configuration.</p>
<p>This function needs to be named <cite>solve</cite> and returns three things: a dictionary with the output data (Solution), a string that stores the whole log, and a dictionary with the log information processed.</p>
</div>
<div class="section" id="name">
<h2>Name<a class="headerlink" href="#name" title="Permalink to this headline">¶</a></h2>
<p>Just put a name and use it inside the DAG generation. The name <em>needs</em> to be defined as a separate variable!</p>
</div>
<div class="section" id="the-input-schema-and-output-schema">
<h2>The input schema and output schema<a class="headerlink" href="#the-input-schema-and-output-schema" title="Permalink to this headline">¶</a></h2>
<p>Both schemas are built and deployed similarly so we present how the input schema is done.</p>
<p>The input schema is a json schema file (<a class="reference external" href="https://json-schema.org/">https://json-schema.org/</a>) that includes all the characteristics of the input data for each dag. This file can be built with many tools (a regular text editor could be enough). We will detail how to do this later.</p>
<p>The input schema is stored in the Variables storage of Airflow. In order to upload it: you need to have an <cite>instance</cite> variable available in your dag file.</p>
<p>Once uploaded, these schemas will be accessible to Cornflow and will be used to validate input data and solutions for this dag.</p>
</div>
<div class="section" id="test-cases">
<h2>Test cases<a class="headerlink" href="#test-cases" title="Permalink to this headline">¶</a></h2>
<p>This function is used in the unittests to be sure the solver works as intended.</p>
</div>
</div>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Guides and how-to" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../dev/index.html" class="btn btn-neutral float-right" title="Code documentation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020-, cornflow documentation team..</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>